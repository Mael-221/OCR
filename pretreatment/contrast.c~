#include <SDL.h>
#include <SDL_image.h>
#include <stdio.h>
#include <stdlib.h>
#include "pixel_operations.h"
#include <math.h>

void contrast_up(SDL_Surface* image)
{
  int w = image -> w;
  int h = image -> h;
  int x = 0;
  while(x<w)
    {
      int y = 0;
      while(y<h)
	{
	  Uint32 pixel = getpixelval(image,x,y);
	  Uint8 r , g ,b;
	  int n = 2;
	  SDL_GetRGB(pixel,image->format,&r,&g,&b);
	  if(r>127)
	    {
	      r = 127*(pow((2*r/255),n));
	    }
	  else
	    {
	      r = 128 * (pow((2*(255-r)/255),n));
	    }
	  if(g>127)
	    {
	      g = 127*(pow((2*g/255),n));
	    }
	  else
	    {
	      g = 128 * (pow((2*(255-g)/255),n));
	    }
	  if(b>127)
	    {
	      b = 127*(pow((2*b/255),n));
	    }
	  else
	    {
	      b = 128 * (pow((2*(255-b)/255),n));
	    }
	  pixel = SDL_MapRGB(image->format,r,g,b);
	  putpixelval(image,x,y,pixel);
	  y = y + 1;
	}
      x = x + 1;
    }  
}
